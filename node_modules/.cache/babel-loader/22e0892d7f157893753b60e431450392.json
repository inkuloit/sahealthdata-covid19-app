{"ast":null,"code":"var _jsxFileName = \"/Applications/XAMPP/xamppfiles/htdocs/humpalumpa/inkuloit/healthdata.co.za/app/src/pages/Auth/Login.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Container } from 'reactstrap';\nimport { Session } from 'bc-react-session';\nimport { useAuth } from 'context/auth';\nimport useForm from 'react-hook-form';\nimport { AuthProvider, GeoLocationProvider } from 'providers';\n\nconst Login = () => {\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm();\n  const [invalidForm, setInvalidForm] = useState(true);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const {\n    setAuthTokens\n  } = useAuth();\n  document.title = 'Portal Login';\n  useEffect(() => {\n    const clearSession = async () => {\n      await Session.destroy();\n    };\n\n    clearSession();\n  }, []);\n\n  const onSubmit = data => {\n    handleLogin(data);\n  };\n\n  async function handleLogin(data) {\n    setIsSubmitting(true);\n    const geoLocation = await GeoLocationProvider.getClientLocation();\n    const auth = await AuthProvider.login(data.username, data.password, geoLocation);\n\n    if (auth.success) {\n      // start react session\n      await Session.start({\n        payload: auth.data,\n        expiration: 21600000 // 6 hours\n\n      });\n      setAuthTokens(auth.data);\n      alert('Successfully logged in!');\n      window.location = '/cpanel/dashboard';\n    } else {\n      alert(auth.message);\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content content-fixed content-auth\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    className: \"pd-x-0 pd-lg-x-10 pd-xl-x-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"media align-items-stretch justify-content-center ht-100p pos-relative\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    method: \"post\",\n    autoComplete: \"off\",\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sign-wrapper mg-lg-l-50 mg-xl-l-60\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"wd-100p\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"tx-color-01 mg-b-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 33\n    }\n  }, \"Sign In\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"tx-color-03 tx-16 mg-b-40\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 33\n    }\n  }, \"Welcome back! Please signin to continue.\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: `form-group ${errors.username && 'is-invalid'}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"username\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 37\n    }\n  }, \"Username\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"username\",\n    name: \"username\",\n    className: \"form-control\",\n    placeholder: \"Enter your username\",\n    disabled: isSubmitting,\n    onKeyUp: e => {\n      setInvalidForm(e.target.value.length <= 4);\n    },\n    ref: register({\n      required: true\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 37\n    }\n  }), /*#__PURE__*/React.createElement(\"small\", {\n    className: \"help-block invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 37\n    }\n  }, errors.username && 'Invalid username')), /*#__PURE__*/React.createElement(\"div\", {\n    className: `form-group ${errors.password && 'is-invalid'}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-between mg-b-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"password\",\n    className: \"mg-b-0-f\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 41\n    }\n  }, \"Password\")), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    id: \"password\",\n    name: \"password\",\n    className: \"form-control\",\n    placeholder: \"Enter your password\",\n    autoComplete: \"new-password\",\n    disabled: isSubmitting,\n    onKeyUp: e => {\n      setInvalidForm(e.target.value.length < 3);\n    },\n    ref: register({\n      required: true\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 37\n    }\n  }), /*#__PURE__*/React.createElement(\"small\", {\n    className: \"help-block invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 37\n    }\n  }, errors.password && 'Invalid password')), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-brand-02 btn-block\",\n    disabled: isSubmitting || invalidForm,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 33\n    }\n  }, \"Sign In\")))))));\n};\n\nexport default Login;","map":{"version":3,"sources":["/Applications/XAMPP/xamppfiles/htdocs/humpalumpa/inkuloit/healthdata.co.za/app/src/pages/Auth/Login.js"],"names":["React","useState","useEffect","Container","Session","useAuth","useForm","AuthProvider","GeoLocationProvider","Login","register","handleSubmit","errors","invalidForm","setInvalidForm","isSubmitting","setIsSubmitting","setAuthTokens","document","title","clearSession","destroy","onSubmit","data","handleLogin","geoLocation","getClientLocation","auth","login","username","password","success","start","payload","expiration","alert","window","location","message","e","target","value","length","required"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Container } from 'reactstrap';\nimport { Session } from 'bc-react-session';\nimport { useAuth } from 'context/auth';\nimport useForm from 'react-hook-form';\nimport {\n    AuthProvider,\n    GeoLocationProvider,\n} from 'providers';\n\nconst Login = () => {\n    const { register, handleSubmit, errors } = useForm();\n    const [invalidForm, setInvalidForm] = useState(true);\n    const [isSubmitting, setIsSubmitting] = useState(false);\n    const { setAuthTokens } = useAuth();\n\n    document.title = 'Portal Login';\n\n    useEffect(() => {\n        const clearSession = async () => {\n            await Session.destroy();\n        };\n        clearSession();\n    }, []);\n\n    const onSubmit = data => {\n        handleLogin(data);\n    };\n\n    async function handleLogin(data) {\n        setIsSubmitting(true);\n        const geoLocation = await GeoLocationProvider.getClientLocation();\n        const auth = await AuthProvider.login(data.username, data.password, geoLocation);\n        if (auth.success) {\n            // start react session\n            await Session.start({\n                payload: auth.data,\n                expiration: 21600000, // 6 hours\n            });\n            setAuthTokens(auth.data);\n            alert('Successfully logged in!');\n            window.location = '/cpanel/dashboard';\n        } else {\n            alert(auth.message);\n        }\n    }\n\n    return (\n        <div className=\"content content-fixed content-auth\">\n            <Container className=\"pd-x-0 pd-lg-x-10 pd-xl-x-0\">\n                <div className=\"media align-items-stretch justify-content-center ht-100p pos-relative\">\n                    <form method=\"post\" autoComplete=\"off\" onSubmit={handleSubmit(onSubmit)}>\n                        <div className=\"sign-wrapper mg-lg-l-50 mg-xl-l-60\">\n                            <div className=\"wd-100p\">\n                                <h3 className=\"tx-color-01 mg-b-5\">Sign In</h3>\n                                <p className=\"tx-color-03 tx-16 mg-b-40\">Welcome back! Please signin to continue.</p>\n\n                                <div className={`form-group ${errors.username && 'is-invalid'}`}>\n                                    <label htmlFor=\"username\">Username</label>\n                                    <input\n                                        type=\"text\"\n                                        id=\"username\"\n                                        name=\"username\"\n                                        className=\"form-control\"\n                                        placeholder=\"Enter your username\"\n                                        disabled={isSubmitting}\n                                        onKeyUp={(e) => {\n                                            setInvalidForm(e.target.value.length <= 4);\n                                        }}\n                                        ref={register({ required: true })}\n                                    />\n                                    <small className=\"help-block invalid-feedback\">{errors.username && 'Invalid username'}</small>\n                                </div>\n                                <div className={`form-group ${errors.password && 'is-invalid'}`}>\n                                    <div className=\"d-flex justify-content-between mg-b-5\">\n                                        <label htmlFor=\"password\" className=\"mg-b-0-f\">Password</label>\n                                        {/* <a href=\"\" className=\"tx-13\">Forgot password?</a> */}\n                                    </div>\n                                    <input\n                                        type=\"password\"\n                                        id=\"password\"\n                                        name=\"password\"\n                                        className=\"form-control\"\n                                        placeholder=\"Enter your password\"\n                                        autoComplete=\"new-password\"\n                                        disabled={isSubmitting}\n                                        onKeyUp={(e) => {\n                                            setInvalidForm(e.target.value.length < 3);\n                                        }}\n                                        ref={register({ required: true })}\n                                    />\n                                    <small className=\"help-block invalid-feedback\">{errors.password && 'Invalid password'}</small>\n                                </div>\n                                <button\n                                    type=\"submit\"\n                                    className=\"btn btn-brand-02 btn-block\"\n                                    disabled={isSubmitting || invalidForm}\n                                >\n                                    Sign In\n                                </button>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n            </Container>\n        </div>\n    );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}